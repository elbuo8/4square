// Generated by CoffeeScript 1.3.3
(function() {
  var querystring, request;

  require('coffee-script');

  request = require('request');

  querystring = require('querystring');

  module.exports = function(client_id, client_secret) {
    var credentials, date;
    date = '20131014';
    credentials = {
      'v': date,
      'client_id': client_id,
      'client_secret': client_secret
    };
    return {
      getVenues: function(params, callback) {
        var urlString;
        urlString = "https://api.foursquare.com/v2/venues/search?" + querystring.stringify(params) + '&' + querystring.stringify(credentials);
        return request(urlString, function(error, response, body) {
          var data, err, _ref;
          body = JSON.parse(body);
          if (body.meta.code >= 300) {
            err = body;
          }
          if ((200 <= (_ref = body.meta.code) && _ref < 400)) {
            data = body;
          }
          return callback(err, data);
        });
      },
      exploreVenues: function(params, callback) {
        var urlString;
        urlString = "https://api.foursquare.com/v2/venues/explore?" + querystring.stringify(params) + '&' + querystring.stringify(credentials);
        return request(urlString, function(error, response, body) {
          var data, err, _ref;
          body = JSON.parse(body);
          if (body.meta.code >= 300) {
            err = body;
          }
          if ((200 <= (_ref = body.meta.code) && _ref < 400)) {
            data = body;
          }
          return callback(err, data);
        });
      },
      getVenue: function(params, callback) {
        var urlString;
        urlString = "https://api.foursquare.com/v2/venues/" + params.venue_id + '?' + querystring.stringify(credentials);
        return request(urlString, function(error, response, body) {
          var data, err, _ref;
          body = JSON.parse(body);
          if (body.meta.code >= 300) {
            err = body;
          }
          if ((200 <= (_ref = body.meta.code) && _ref < 400)) {
            data = body;
          }
          return callback(err, data);
        });
      }
    };
  };

}).call(this);
